# DeviceTasker

–°–µ—Ä–≤–∏—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á –∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—â–∏–π —Å –±—Ä–æ–∫–µ—Ä–æ–º —Å–æ–æ–±—â–µ–Ω–∏–π

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Python 3.12+** –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
- **FastAPI** –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è REST API.
- **Postgres** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö.
- **RabittMQ** –≤ –∫–∞—á–µ—Å—Ç–≤–µ –±—Ä–æ–∫–µ—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- **httpx** –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤.
- **punq** –¥–ª—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
- **docker-compose** –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏.
- **Makefile** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–±–æ—Ä–∫–æ–π –∏ –∑–∞–ø—É—Å–∫–æ–º.

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
    ```bash
    git clone https://github.com/namig41/DeviceTasker.git
    cd DeviceTasker
    ```

2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `.env`:
    ```bash
    cp .env.example .env
    ```

    –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö ‚Äî –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å–µ—Ç—å Docker –∏ —É–∫–∞–∑—ã–≤–∞—Ç—å –∏–º–µ–Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ö–æ—Å—Ç–æ–≤

3. **–°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ uv**:

    –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `uv`:

    ```bash
    pip install uv
    ```
    –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

    ```bash
    uv sync
    ```

4. **–°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker**:
    –ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `Makefile` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞ —á–µ—Ä–µ–∑ Docker.

    –î–ª—è —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã:

    - –î–ª—è —Å–±–æ—Ä–∫–∏ Docker-–æ–±—Ä–∞–∑–∞:
      ```bash
      make
      ```

    - –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:
      ```bash
      make stop
      ```

    - –î–ª—è –æ—á–∏—Å—Ç–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:
      ```bash
      make clean
      ```

5. **–ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π**:

    - –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π —Å –ø–æ–º–æ—â—å—é `Makefile`:
      ```bash
      make migrate.up
      ```

    - –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π —Å –ø–æ–º–æ—â—å—é `alembic`:
      ```bash
      uv run alembic upgrade head
      ```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã. –î–ª—è –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É:

```bash
make tests
```

## Architecture

![Architecture Diagram](assets/architecture.png)

### –ü—Ä–æ—Ü–µ—Å—Å:

1. –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π Service A –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π Service B –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç –∑–∞–¥–∞—á–∏ –≤ –æ—á–µ—Ä–µ–¥—å (RabbitMQ) –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞—á –Ω–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏—é –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è.
2. Worker —Å–ª—É—à–∞–µ—Ç –æ—á–µ—Ä–µ–¥—å –∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∑–∞–¥–∞—á–∏.
3. Worker –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π Service B –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞.